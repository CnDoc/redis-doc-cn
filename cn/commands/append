<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <link href='../styles.css?1333128600' rel='stylesheet' type='text/css' />
    <link href='../images/favicon.png' rel='shortcut icon' />
    <link href='../opensearch.xml' rel='search' title='Look up a Redis command' type='application/opensearchdescription+xml' />
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js'></script>
    <script async='async' defer='defer' src='../app.js?1375789679'></script>
    <meta content='width=device-width, minimum-scale=1.0, maximum-scale=1.0' name='viewport' />
    <title>
      APPEND – Redis
    </title>
    <script type='text/javascript'>
      //<![CDATA[
         var _gaq = _gaq || [];
         _gaq.push(['_setAccount', 'UA-20243082-1']);
         _gaq.push(['_trackPageview']);
        
         (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
         })();
      //]]>
    </script>
  </head>
  <body class=''><style type="text/css">#modify_div {position: fixed;right: 0px;top: 50px;	background-color: #000000;	height: 30px;width: 100px;border-top-width: 2px;border-right-width: 2px;border-bottom-width: 2px;border-left-width: 2px;border-top-style: dashed;border-right-style: none;border-bottom-style: dashed;border-left-style: dashed;border-top-color: #333333;border-right-color: #333333;border-bottom-color: #333333;border-left-color: #333333;}#modify {display: block;position: fixed;right: 23px;top: 60px;color: #FFFFFF;text-decoration: none;font-size: 12px;font-weight: bold;}#modify:hover {text-decoration: underline;}</style><div id="modify_div"></div><a href="https://github.com/jialechan/redis-doc-cn/edit/gh-pages/cn/commands/append" id="modify" target="_blank">修改本页</a><script>$('#modify_div').css('opacity', '0.6');	</script>
    <header>
      <div class='container'>
        <a href='../index.html'>
          <img alt='Redis' height='30' src='../images/redis.png' width='93' />
        </a>
        <nav>
          <a href='../commands'>Commands</a>
          <a href='../clients'>Clients</a>
          <a href='../documentation'>Documentation</a>
          <a href='../community'>Community</a>
          <a href='../download'>Download</a>
          <a href='https://github.com/antirez/redis/issues'>Issues</a>
          <a href='../support'>Support</a>
          <a href='../topics/license'>License</a>
        </nav>
      </div>
    </header>
    <div class='text'>
      <h1 class='command'>
        <span class='name'>APPEND</span>
        <span class='arg'>key</span>
        <span class='arg'>value</span>
      </h1>
      <article>
        <aside>
          <h2>
            Related commands
          </h2>
          <ul>
            <li>
              <a href='append'>
                <strong>APPEND</strong>
              </a>
            </li>
            <li>
              <a href='bitcount'>
                BITCOUNT
              </a>
            </li>
            <li>
              <a href='bitop'>
                BITOP
              </a>
            </li>
            <li>
              <a href='bitpos'>
                BITPOS
              </a>
            </li>
            <li>
              <a href='decr'>
                DECR
              </a>
            </li>
            <li>
              <a href='decrby'>
                DECRBY
              </a>
            </li>
            <li>
              <a href='get'>
                GET
              </a>
            </li>
            <li>
              <a href='getbit'>
                GETBIT
              </a>
            </li>
            <li>
              <a href='getrange'>
                GETRANGE
              </a>
            </li>
            <li>
              <a href='getset'>
                GETSET
              </a>
            </li>
            <li>
              <a href='incr'>
                INCR
              </a>
            </li>
            <li>
              <a href='incrby'>
                INCRBY
              </a>
            </li>
            <li>
              <a href='incrbyfloat'>
                INCRBYFLOAT
              </a>
            </li>
            <li>
              <a href='mget'>
                MGET
              </a>
            </li>
            <li>
              <a href='mset'>
                MSET
              </a>
            </li>
            <li>
              <a href='msetnx'>
                MSETNX
              </a>
            </li>
            <li>
              <a href='psetex'>
                PSETEX
              </a>
            </li>
            <li>
              <a href='set'>
                SET
              </a>
            </li>
            <li>
              <a href='setbit'>
                SETBIT
              </a>
            </li>
            <li>
              <a href='setex'>
                SETEX
              </a>
            </li>
            <li>
              <a href='setnx'>
                SETNX
              </a>
            </li>
            <li>
              <a href='setrange'>
                SETRANGE
              </a>
            </li>
            <li>
              <a href='strlen'>
                STRLEN
              </a>
            </li>
          </ul>
        </aside>
        <div class='metadata'>
          <p><strong>Available since 2.0.0.</strong></p>
          <p><strong>Time complexity:</strong> O(1). The amortized time complexity is O(1) assuming the appended value is small and the already present value is of any size, since the dynamic string library used by Redis will double the free space available on every reallocation.</p>
        </div>
        <p>If <code>key</code> already exists and is a string, this command appends the <code>value</code> at the
        end of the string.
        If <code>key</code> does not exist it is created and set as an empty string, so <a href="append">APPEND</a>
        will be similar to <a href="set">SET</a> in this special case.</p>
        
        <h2>Return value</h2>
        
        <p><a href="../topics/protocol#integer-reply">Integer reply</a>: the length of the string after the append operation.</p>
        
        <h2>Examples</h2>
        
        <div class='example' data-session='438951135ff41998b72b9097e8e62bf5'>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>EXISTS mykey</span>
          <pre>(integer) 0</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>APPEND mykey &quot;Hello&quot;</span>
          <pre>(integer) 5</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>APPEND mykey &quot; World&quot;</span>
          <pre>(integer) 11</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>GET mykey</span>
          <pre>"Hello World"</pre><form>
            <span class='monospace prompt'>redis&gt;&nbsp;</span>
            <input autocomplete='off' name='command' spellcheck='false' type='text' />
          </form></div>
        
        
        <h2>Pattern: Time series</h2>
        
        <p>The <a href="append">APPEND</a> command can be used to create a very compact representation of a
        list of fixed-size samples, usually referred as <em>time series</em>.
        Every time a new sample arrives we can store it using the command</p>
        
        <pre><code>APPEND timeseries &quot;fixed-size sample&quot;&#x000A;</code></pre>
        
        <p>Accessing individual elements in the time series is not hard:</p>
        
        <ul>
        <li><a href="strlen">STRLEN</a> can be used in order to obtain the number of samples.</li>
        <li><a href="getrange">GETRANGE</a> allows for random access of elements.
        If our time series have associated time information we can easily implement
        a binary search to get range combining <a href="getrange">GETRANGE</a> with the Lua scripting
        engine available in Redis 2.6.</li>
        <li><a href="setrange">SETRANGE</a> can be used to overwrite an existing time series.</li>
        </ul>
        
        <p>The limitation of this pattern is that we are forced into an append-only mode
        of operation, there is no way to cut the time series to a given size easily
        because Redis currently lacks a command able to trim string objects.
        However the space efficiency of time series stored in this way is remarkable.</p>
        
        <p>Hint: it is possible to switch to a different key based on the current Unix
        time, in this way it is possible to have just a relatively small amount of
        samples per key, to avoid dealing with very big keys, and to make this pattern
        more friendly to be distributed across many Redis instances.</p>
        
        <p>An example sampling the temperature of a sensor using fixed-size strings (using
        a binary format is better in real implementations).</p>
        
        <div class='example' data-session='438951135ff41998b72b9097e8e62bf5'>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>APPEND ts &quot;0043&quot;</span>
          <pre>(integer) 4</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>APPEND ts &quot;0035&quot;</span>
          <pre>(integer) 8</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>GETRANGE ts 0 3</span>
          <pre>"0043"</pre>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>GETRANGE ts 4 7</span>
          <pre>"0035"</pre><form>
            <span class='monospace prompt'>redis&gt;&nbsp;</span>
            <input autocomplete='off' name='command' spellcheck='false' type='text' />
          </form></div>
      </article>
    </div>
    <div class='text' id='comments'>
      <div id='disqus_thread'></div>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_shortname = 'redisio';
          
          // The following are highly recommended additional parameters. Remove the slashes in front to use.
          var disqus_identifier = 'command_append';
          var disqus_url = 'http://redis.io/commands/append';
          
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        //]]>
      </script>
      <a class='dsq-brlink' href='http://disqus.com'>
        Comments powered by
        <span class='logo-disqus'>
          Disqus
        </span>
      </a>
    </div>
    <footer>
      <p>
        This website is
        <a href="https://github.com/antirez/redis-io">open source software</a>
        developed by <a href="http://citrusbyte.com">Citrusbyte</a>.
        <br> The Redis logo was designed by <a href="http://www.carlosprioglio.com/">Carlos Prioglio</a>. See more <a href="../topics/sponsors">credits</a>.
      </p>
      <div class='sponsor'>
        Sponsored by
        <a href='http://www.gopivotal.com/products/redis'>
          <img alt='Redis Support' height='25' src='../images/pivotal.png' title='Redis Sponsor' width='99' />
        </a>
      </div>
    </footer>
  </body>
</html>
<script type="text/javascript">
lloogg_clientid = "20bb9c026e";
</script>
<script type="text/javascript" src="http://demo.lloogg.com/l.js?c=20bb9c026e">
</script>
