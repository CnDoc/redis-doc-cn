<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <link href='../styles.css?1333128600' rel='stylesheet' type='text/css' />
    <link href='../images/favicon.png' rel='shortcut icon' />
    <link href='../opensearch.xml' rel='search' title='Look up a Redis command' type='application/opensearchdescription+xml' />
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js'></script>
    <script async='async' defer='defer' src='../app.js?1375789679'></script>
    <meta content='width=device-width, minimum-scale=1.0, maximum-scale=1.0' name='viewport' />
    <title>
      ROLE – Redis
    </title>
    <script type='text/javascript'>
      //<![CDATA[
         var _gaq = _gaq || [];
         _gaq.push(['_setAccount', 'UA-20243082-1']);
         _gaq.push(['_trackPageview']);
        
         (function() {
           var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
           ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
           var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
         })();
      //]]>
    </script>
  </head>
  <body class=''><style type="text/css">#modify_div {position: fixed;right: 0px;top: 50px;	background-color: #000000;	height: 30px;width: 100px;border-top-width: 2px;border-right-width: 2px;border-bottom-width: 2px;border-left-width: 2px;border-top-style: dashed;border-right-style: none;border-bottom-style: dashed;border-left-style: dashed;border-top-color: #333333;border-right-color: #333333;border-bottom-color: #333333;border-left-color: #333333;}#modify {display: block;position: fixed;right: 23px;top: 60px;color: #FFFFFF;text-decoration: none;font-size: 12px;font-weight: bold;}#modify:hover {text-decoration: underline;}</style><div id="modify_div"></div><a href="https://github.com/jialechan/redis-doc-cn/edit/gh-pages/cn/commands/role" id="modify" target="_blank">修改本页</a><script>$('#modify_div').css('opacity', '0.6');	</script>
    <header>
      <div class='container'>
        <a href='../index.html'>
          <img alt='Redis' height='30' src='../images/redis.png' width='93' />
        </a>
        <nav>
          <a href='../commands'>Commands</a>
          <a href='../clients'>Clients</a>
          <a href='../documentation'>Documentation</a>
          <a href='../community'>Community</a>
          <a href='../download'>Download</a>
          <a href='https://github.com/antirez/redis/issues'>Issues</a>
          <a href='../support'>Support</a>
          <a href='../topics/license'>License</a>
        </nav>
      </div>
    </header>
    <div class='text'>
      <h1 class='command'>
        <span class='name'>ROLE</span>
      </h1>
      <article>
        <aside>
          <h2>
            Related commands
          </h2>
          <ul>
            <li>
              <a href='bgrewriteaof'>
                BGREWRITEAOF
              </a>
            </li>
            <li>
              <a href='bgsave'>
                BGSAVE
              </a>
            </li>
            <li>
              <a href='client-getname'>
                CLIENT GETNAME
              </a>
            </li>
            <li>
              <a href='client-kill'>
                CLIENT KILL
              </a>
            </li>
            <li>
              <a href='client-list'>
                CLIENT LIST
              </a>
            </li>
            <li>
              <a href='client-pause'>
                CLIENT PAUSE
              </a>
            </li>
            <li>
              <a href='client-setname'>
                CLIENT SETNAME
              </a>
            </li>
            <li>
              <a href='cluster-slots'>
                CLUSTER SLOTS
              </a>
            </li>
            <li>
              <a href='command'>
                COMMAND
              </a>
            </li>
            <li>
              <a href='command-count'>
                COMMAND COUNT
              </a>
            </li>
            <li>
              <a href='command-getkeys'>
                COMMAND GETKEYS
              </a>
            </li>
            <li>
              <a href='command-info'>
                COMMAND INFO
              </a>
            </li>
            <li>
              <a href='config-get'>
                CONFIG GET
              </a>
            </li>
            <li>
              <a href='config-resetstat'>
                CONFIG RESETSTAT
              </a>
            </li>
            <li>
              <a href='config-rewrite'>
                CONFIG REWRITE
              </a>
            </li>
            <li>
              <a href='config-set'>
                CONFIG SET
              </a>
            </li>
            <li>
              <a href='dbsize'>
                DBSIZE
              </a>
            </li>
            <li>
              <a href='debug-object'>
                DEBUG OBJECT
              </a>
            </li>
            <li>
              <a href='debug-segfault'>
                DEBUG SEGFAULT
              </a>
            </li>
            <li>
              <a href='flushall'>
                FLUSHALL
              </a>
            </li>
            <li>
              <a href='flushdb'>
                FLUSHDB
              </a>
            </li>
            <li>
              <a href='info'>
                INFO
              </a>
            </li>
            <li>
              <a href='lastsave'>
                LASTSAVE
              </a>
            </li>
            <li>
              <a href='monitor'>
                MONITOR
              </a>
            </li>
            <li>
              <a href='role'>
                <strong>ROLE</strong>
              </a>
            </li>
            <li>
              <a href='save'>
                SAVE
              </a>
            </li>
            <li>
              <a href='shutdown'>
                SHUTDOWN
              </a>
            </li>
            <li>
              <a href='slaveof'>
                SLAVEOF
              </a>
            </li>
            <li>
              <a href='slowlog'>
                SLOWLOG
              </a>
            </li>
            <li>
              <a href='sync'>
                SYNC
              </a>
            </li>
            <li>
              <a href='time'>
                TIME
              </a>
            </li>
          </ul>
        </aside>
        <div class='metadata'>
          <p><strong>Available since 2.8.12.</strong></p>
        </div>
        <p>Provide information on the role of a Redis instance in the context of replication, by returing if the instance is currently a <code>master</code>, <code>slave</code>, or <code>sentinel</code>. The command also returns additional information about the state of the replication (if the role is master or slave) or the list of monitored master names (if the role is sentinel).</p>
        
        <h2>Output format</h2>
        
        <p>The command returns an array of elements. The first element is the role of
        the instance, as one of the following three strings:</p>
        
        <ul>
        <li>&quot;master&quot;</li>
        <li>&quot;slave&quot;</li>
        <li>&quot;sentinel&quot;</li>
        </ul>
        
        <p>The additional elements of the array depends on the role.</p>
        
        <h2>Master output</h2>
        
        <p>An example of output when <a href="role">ROLE</a> is called in a master instance:</p>
        
        <pre><code>1) &quot;master&quot;&#x000A;2) (integer) 3129659&#x000A;3) 1) 1) &quot;127.0.0.1&quot;&#x000A;      2) &quot;9001&quot;&#x000A;      3) &quot;3129242&quot;&#x000A;   2) 1) &quot;127.0.0.1&quot;&#x000A;      2) &quot;9002&quot;&#x000A;      3) &quot;3129543&quot;&#x000A;</code></pre>
        
        <p>The master output is composed of the following parts:</p>
        
        <ol>
        <li>The string <code>master</code>.</li>
        <li>The current master replication offset, which is an offset that masters and slaves share to understand, in partial resynchronizations, the part of the replication stream the slave needs to fetch to continue.</li>
        <li>An array composed of three elements array representing the connected slaves. Every sub-array contains the slave IP, port, and the last acknowledged replication offset.</li>
        </ol>
        
        <h2>Slave output</h2>
        
        <p>An example of output when <a href="role">ROLE</a> is called in a slave instance:</p>
        
        <pre><code>1) &quot;slave&quot;&#x000A;2) &quot;127.0.0.1&quot;&#x000A;3) (integer) 9000&#x000A;4) &quot;connected&quot;&#x000A;5) (integer) 3167038&#x000A;</code></pre>
        
        <p>The slave output is composed of the following parts:</p>
        
        <ol>
        <li>The string <code>slave</code>.</li>
        <li>The IP of the master.</li>
        <li>The port number of the master.</li>
        <li>The state of the replication from the point of view of the master, that can be <code>connect</code> (the instance needs to connect to its master), <code>connecting</code> (the slave-master connection is in progress), <code>sync</code> (the master and slave are trying to perform the synchronization), <code>connected</code> (the slave is online).</li>
        <li>The amount of data received from the slave so far in terms of master replication offset.</li>
        </ol>
        
        <h2>Sentinel output</h2>
        
        <p>An example of Sentinel output:</p>
        
        <p>1) &quot;sentinel&quot;
        2) 1) &quot;resque-master&quot;
           2) &quot;html-fragments-master&quot;
           3) &quot;stats-master&quot;
           4) &quot;metadata-master&quot;</p>
        
        <p>The sentinel output is composed of the following parts:</p>
        
        <ol>
        <li>The string <code>sentinel</code>.</li>
        <li>An array of master names monitored by this Sentinel instance.</li>
        </ol>
        
        <h2>Return value</h2>
        
        <p><a href="../topics/protocol#array-reply">Array reply</a>: where the first element is one of <code>master</code>, <code>slave</code>, <code>sentinel</code> and the additional elements are role-specific as illustrated above.</p>
        
        <h2>History</h2>
        
        <ul>
        <li>This command was introduced in the middle of a Redis stable release, specifically with Redis 2.8.12.</li>
        </ul>
        
        <h2>Examples</h2>
        
        <div class='example' data-session='e45f3af3c25647f35b4e06f65df573ee'>
          <span class='monospace prompt'>redis&gt;&nbsp;</span>
          <span class='monospace command'>ROLE</span>
          <pre>1) "master"&#x000A;2) (integer) 0&#x000A;3) (empty list or set)</pre><form>
            <span class='monospace prompt'>redis&gt;&nbsp;</span>
            <input autocomplete='off' name='command' spellcheck='false' type='text' />
          </form></div>
      </article>
    </div>
    <div class='text' id='comments'>
      <div id='disqus_thread'></div>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_shortname = 'redisio';
          
          // The following are highly recommended additional parameters. Remove the slashes in front to use.
          var disqus_identifier = 'command_role';
          var disqus_url = 'http://redis.io/commands/role';
          
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        //]]>
      </script>
      <a class='dsq-brlink' href='http://disqus.com'>
        Comments powered by
        <span class='logo-disqus'>
          Disqus
        </span>
      </a>
    </div>
    <footer>
      <p>
        This website is
        <a href="https://github.com/antirez/redis-io">open source software</a>
        developed by <a href="http://citrusbyte.com">Citrusbyte</a>.
        <br> The Redis logo was designed by <a href="http://www.carlosprioglio.com/">Carlos Prioglio</a>. See more <a href="../topics/sponsors">credits</a>.
      </p>
      <div class='sponsor'>
        Sponsored by
        <a href='http://www.gopivotal.com/products/redis'>
          <img alt='Redis Support' height='25' src='../images/pivotal.png' title='Redis Sponsor' width='99' />
        </a>
      </div>
    </footer>
  </body>
</html>
<script type="text/javascript">
lloogg_clientid = "20bb9c026e";
</script>
<script type="text/javascript" src="http://demo.lloogg.com/l.js?c=20bb9c026e">
</script>
